App search & browse feature:
- New reusable AppSearchBar component (components/app-search-bar.tsx) with 3 modes: follow, competitor, browse-only
- Search results show app icon, name (clickable Link to /apps/{slug}), rating/reviews, and status badges (Following/Competitor/This app)
- + button action depends on mode: follow mode adds as my app, competitor mode adds as competitor
- + button has title tooltip on hover explaining the action
- Browse (clicking app name) available to all roles; action buttons only for owner/editor
- Replaced duplicated inline search code in /apps/page.tsx and competitors-section.tsx
- Added search to homepage (My Apps card: follow mode, Competitor Apps card: browse-only)
- Added search to /competitors page (browse-only mode)
- API: added iconUrl to GET /api/apps/search response

Settings page profile edit & direct user creation notes:

- PATCH /api/auth/me extended: name, email (uniqueness check), password change (current password verification)
- POST /api/account/members added: owner-only direct user creation (email, name, password, role)
- JWT email update: no re-issuing needed, next token refresh (15min) picks up new email
- Invitation API routes kept for backward compatibility, just not used from dashboard anymore
- bcrypt imported in account.ts for password hashing in user creation

Scraping depth documentation:
- Created files/SCRAPING-DEPTH.md documenting all cron job schedules, pagination limits, stop conditions, cascade behavior, rate limiting, and data flow

Dashboard table links & competitors self-row:
- Overview and /apps pages: table cells (Reviews, Competitors, Keywords, Ranked, Last Change) now link to their respective detail pages
- /apps/[slug]/competitors: tracked app itself shown at top with green highlight (border-l-emerald-500 bg-emerald-500/10)
- API: GET /api/account/tracked-apps/:slug/competitors?includeSelf=true prepends self app with isSelf flag
- Self row excluded from reorder/delete actions, always pinned to top when sorting
- Migration startup wrapped in try-catch for idempotent restarts
- SCRAPING-DEPTH.md updated with keyword suggestion details (storage, cascade scoping)

Developer page table enrichment:
- /api/apps/by-developer now returns isBuiltForShopify, launchedDate, minPaidPrice (computed from pricingPlans)
- Developer page table matches /apps page: sortable columns, BFS badge, linked Reviews/Min. Paid/Last Change cells, Categories with ranking, Launched date
- Batch-fetches categories and last-changes in parallel after loading apps

Compare page keyword density & test mode:
- Added KeywordDensityTable component with stop word filtering, grouped by count (only count > 1)
- useKeywordDensity hook: tokenizes text, filters stop words, groups keywords by frequency, calculates density %
- App Details section now uses side-by-side layout (text left, keyword density table right)
- Collapsible "Test a new description" panel: textarea with CharBadge, Analyze/Clear buttons
- When analyzed, shows draft text + keyword density table in grid-cols-2 layout

Review velocity & acceleration metrics:
- New DB table: app_review_metrics (v7d, v30d, v90d, accMicro, accMacro, momentum)
- Computation job counts reviews from reviews table (COUNT FILTER WHERE review_date >= N days ago)
- Review scraper updated: sort_by=newest, 90-day cutoff, max 50 pages
- Reviews worker auto-triggers metrics computation after scraping (no separate cron needed)
- API: POST /api/apps/review-velocity bulk endpoint, competitors endpoints enriched
- Dashboard: R7d, R30d, R90d, Momentum columns on competitors page, per-app competitors, app-list-table
- MomentumBadge component with emoji states (Accelerating/Stable/Slowing/Spike/Flat)
- Instant tooltips on table headers using Radix UI Tooltip (delayDuration=0)
- Admin can still manually trigger compute_review_metrics from scraper page

Competitors page enhancements (pin, rank change, avg sort, percentile):
- Pin toggle for self app: Pin/PinOff icon in # column, toggles sticky-at-top vs sorted naturally
- State persisted in localStorage per appSlug (competitors-pin-self-{appSlug})
- Category rank change: API query enhanced with LAG() window function to get prev_position
- Displayed as (#5 (+2)) in green for improvement, red for drops
- Cat. Rank sorting changed from best (min) rank to average rank across all categories
- Category percentile: API enhanced with LEFT JOIN LATERAL to category_snapshots for app_count
- Displayed as "Top X%" with tooltip showing "Rank N of M apps"
- Single combined SQL query serves both rank change and percentile (no extra round trips)

Category ad sightings â€” historical tracking:
- New DB table: category_ad_sightings (appSlug, categorySlug, seenDate, timesSeenInDay, firstSeenRunId, lastSeenRunId)
- Unique index on (appSlug, categorySlug, seenDate) with upsert-on-conflict for timesSeenInDay increment
- Category scraper: recordCategoryAdSightings() called for every page (first + additional), filters is_sponsored apps
- API: GET /api/apps/:slug/category-ad-sightings and GET /api/categories/:slug/ads endpoints
- Dashboard: App Ads page split into "Keyword Ad History" + "Category Ad History" cards
- Dashboard: Category page gets "Sponsored Apps" heatmap section with empty state
- CLI: categories command now accepts optional slug for single-category scrape
